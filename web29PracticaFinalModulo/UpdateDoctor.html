<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editar Doctor</title>
    <script src="../js/jquery-3.7.1.js"></script>
</head>

<body>

    <label for="idHospital">idHospital</label>
    <input type="number" id="idHospital">
    <label for="apellido">apellido</label>
    <input type="text" id="apellido">
    <label for="especialidad">especialidad</label>
    <input type="text" id="especialidad">
    <label for="salario">salario</label>
    <input type="number" id="salario">
    <button id="enviar">Enviar</button>
    <script>
        var url = "https://apicruddoctores.azurewebsites.net/";
        $(document).ready(function () {

            var parametro = new window.URLSearchParams(window.location.search);
            var idDoctor = parametro.get("idDoctor");
            var request = "api/Doctores/" + idDoctor;
            //Para que rellene los inputs
            $.ajax({
                url: url + request,
                method:"GET",
                contentType:"application/json",
                success:function(datos){
                    $("#idHospital").val(datos.idHospital);
                    $("#apellido").val(datos.apellido);
                    $("#especialidad").val(datos.especialidad);
                    $("#salario").val(datos.salario);
                    
                }
            })
            
            //Enviar los nuevos datos
            
            $("#enviar").click(function () {
                var idHospital = parseInt($("#idHospital").val());
                var apellido = $("#apellido").val();
                var especialidad = $("#especialidad").val();
                var salario = parseInt($("#salario").val());
                var doctor = new Object();

                
                doctor.idHospital = idHospital;
                doctor.apellido = apellido;
                doctor.especialidad = especialidad;
                doctor.salario = salario;

                var doctorJson = JSON.stringify(doctor);

                var requestPut  = "api/Doctores";

                $.ajax({
                    url: url + requestPut,
                    method:"PUT",
                    contentType:"application/json",
                    data:doctorJson,
                    success:function(){
                        console.log("Ingresado con exito");
                        window.location.href="HomeDoctor.html";
                        
                    }
                })


            })




        })
    </script>
</body>

</html>
